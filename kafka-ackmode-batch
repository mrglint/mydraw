@startuml
title AckMode.BATCH is default mode
ListenerConsumer -> ListenerConsumer : pollAndInvoke
note left
    ListenerConsumer is
    consumer thread
end note
alt business logic throw exception
    ListenerConsumer -> Listener : listener
    note left
        business logic write in Listener
        that decorate by @KafkaListener
    end note
    ListenerConsumer -> SeekToCurrentErrorHandler : invokeErrorHandler
    note left
        will retry 10 times if consume event exception
    end note
    ListenerConsumer -> ListenerConsumer : ackCurrent
    ListenerConsumer -> KafkaServer : commitOffset
    note left
        lead to skipping event that occurs an exception ,
        missing event happen in here
    end note
end alt

@enduml
